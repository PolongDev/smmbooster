(()=>{"use strict";const t=function(t,e,s,i,a,o,n,r){var d,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=d):a&&(d=r?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),d)if(c.functional){c._injectStyles=d;var l=c.render;c.render=function(t,e){return d.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,d):[d]}return{exports:t,options:c}}({mounted:function(){},props:["service","editFun","deleteFun","viewFun","permissions"],methods:{editItem:function(){this.editFun(this.service.id)},deleteItem:function(){this.deleteFun(this.service.id)},viewItem:function(){this.viewFun(this.service.id)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"font-w600"},[s("a",{staticClass:"font-w700",attrs:{href:"#"}},[t._v(t._s(t.service.id))])]),t._v(" "),s("td",{staticClass:"d-none d-sm-table-cell"},[t._v("\n        "+t._s(t.service.name)+"\n    ")]),t._v(" "),s("td",{staticClass:"d-none d-sm-table-cell"},[t._v("\n        "+t._s(t.service.category.name)+"\n    ")]),t._v(" "),s("td",{staticClass:"d-none d-sm-table-cell"},[s("div",{staticClass:"text-center"},[s("div",[t._v("  "+t._s(t.service.rate))]),t._v(" "),s("div",[s("small",[t._v(t._s(t.service.rate_original))])])])]),t._v(" "),s("td",{staticClass:"d-none d-sm-table-cell"},[t._v("\n    "+t._s(t.service.min)+"/ "+t._s(t.service.max)+"\n    ")]),t._v(" "),s("td",{staticClass:"d-none d-sm-table-cell"},[s("span",{staticClass:"badge badge-pill",class:{"badge-success":"active"==t.service.status,"badge-danger":"deactive"==t.service.status}},[t._v(t._s(this.$getLang(t.service.status)))])]),t._v(" "),s("td",{staticClass:"text-center"},[t.permissions.edit?s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:this.$getLang("edit"),"data-toggle":"tooltip","data-placement":"bottom"},on:{click:function(e){return t.editItem()}}},[s("i",{staticClass:"fa fa-pencil-alt"})])]):t._e(),t._v(" "),t.permissions.delete?s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button",title:this.$getLang("delete"),"data-toggle":"tooltip","data-placement":"bottom"},on:{click:function(e){return t.deleteItem()}}},[s("i",{staticClass:"fa fa-trash"})])]):t._e(),t._v(" "),t.permissions.view?s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-sm btn-info",attrs:{type:"button"},on:{click:function(e){return t.viewItem()}}},[s("i",{staticClass:"fa fa-eye"})])]):t._e()])])}),[],!1,null,null,null).exports;var e="services/";new Vue({el:"#app",data:{is_api_provider:!1,postdata:{},errors:{},modal_target:"#edit-service-modal",delete_item:0,services:{},search:"",selected_api_provider:"",loading:!0,permissions:[],min:0,max:0,rate:0,percentage_increase:0},components:{"service-item":t},methods:{loadModal:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.initForm(),e?axios.get(window.location.href+"/"+e).then((function(e){200==e.status&&(t.postdata=e.data,$(t.modal_target).modal("show"))})):$(this.modal_target).modal("show")},closeModal:function(){$(this.modal_target).modal("hide")},storeService:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.valideForm(),0==Object.keys(this.errors).length&&(s?axios.put(window.location.href+"/"+s,this.postdata).then((function(e){200==e.status&&($(t.modal_target).modal("hide"),window.utilities.notify("success","service updated successfully"),t.getServices())})).catch((function(e){300==e.response.status&&($(t.modal_target).modal("hide"),window.utilities.notify("error","for security reasons you can't update data in demo version"))})):axios.post(e,this.postdata).then((function(e){200==e.status&&($(t.modal_target).modal("hide"),window.utilities.notify("success","New service added successfully"),t.getServices())})).catch((function(e){300==e.response.status&&($(t.modal_target).modal("hide"),window.utilities.notify("error","for security reasons you can't update data in demo version"))})))},getServices:function(t){var e=this;this.loading=!0;var s=new URLSearchParams(window.location.search),i="";s.has("api_provider")?i="&api_provider="+s.get("api_provider"):this.selected_api_provider&&(i="&api_provider="+this.selected_api_provider),void 0===t&&(t=1);var a="?api=true&page="+t+i;null!=this.search&&this.search.length&&(a+="&search="+this.search),axios.get(a).then((function(t){200==t.status&&(e.services=t.data.services,e.permissions=t.data.permissions,e.loading=!1)})).catch((function(t){}))},loadModalDelete:function(t){this.delete_item=t,$("#modal-delete").modal("show")},loadModalView:function(t){dashboard("// to do ")},deleteItem:function(){var t=this;axios.delete(e+this.delete_item).then((function(e){200==e.status&&($("#modal-delete").modal("hide"),window.utilities.notify("success","item deleted successfully"),t.getServices())})).catch((function(t){300==t.response.status&&($("#modal-delete").modal("hide"),window.utilities.notify("error","for security reasons you can't update data in demo version"))}))},valideForm:function(){this.errors={},this.postdata.name?this.postdata.name.length>150&&this.$set(this.errors,"name",{over_length:!0}):this.$set(this.errors,"name",{required:!0}),this.postdata.category_id||this.$set(this.errors,"category_id","required"),"api"!==this.postdata.type||this.postdata.api_provider_id||this.$set(this.errors,"api_provider_id","required"),"api"!==this.postdata.type||this.postdata.percentage_increase||this.$set(this.errors,"percentage_increase","required"),(!this.postdata.min||this.postdata.min<0)&&this.$set(this.errors,"min","required"),this.postdata.max||this.$set(this.errors,"max","required"),(!this.postdata.rate||this.postdata.rate<0)&&this.$set(this.errors,"rate","required")},initForm:function(){this.$set(this.postdata,"type","normal"),this.$set(this.postdata,"category_id",""),this.$set(this.postdata,"status","active"),this.$set(this.postdata,"min",this.min),this.$set(this.postdata,"max",this.max),this.$set(this.postdata,"rate",this.rate),this.$set(this.postdata,"description",""),this.$set(this.postdata,"name",null),this.$set(this.postdata,"api_provider_id",null),this.$set(this.postdata,"id",null)},getSettings:function(){var t=this;axios.post("/admin/settings/all").then((function(e){e.data&&(t.min=e.data.min_order,t.max=e.data.max_order,t.rate=e.data.price_per_1000)})).catch((function(e){300==e.response.status&&($(t.modal_target).modal("hide"),window.utilities.notify("error","for security reasons you can't update data in demo version"))}))},initApiProvider:function(){var t=new URLSearchParams(window.location.search);this.selected_api_provider=t.get("api_provider")}},mounted:function(){this.initForm(),this.initApiProvider(),this.getServices(),this.getSettings()}})})();