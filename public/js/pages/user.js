(()=>{"use strict";const t=function(t,s,e,a,i,o,r,n){var d,l="function"==typeof t?t.options:t;if(s&&(l.render=s,l.staticRenderFns=e,l._compiled=!0),a&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),r?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=d):i&&(d=n?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),d)if(l.functional){l._injectStyles=d;var u=l.render;l.render=function(t,s){return d.call(s),u(t,s)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,d):[d]}return{exports:t,options:l}}({mounted:function(){console.log("Component mounted.")},props:["user","editFun","deleteFun","viewFun"],methods:{editItem:function(){this.editFun(this.user.id)},deleteItem:function(){this.deleteFun(this.user.id)},viewItem:function(){this.viewFun(this.user.id)}}},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("th",{staticClass:"text-center",attrs:{scope:"row"}},[t._v(t._s(t.user.id))]),t._v(" "),e("td",{staticClass:"d-none d-sm-table-cell"},[t._v("\r\n                    "+t._s(t.user.firstname)+" "+t._s(t.user.lastname)+" "),e("br"),t._v("\r\n                    "+t._s(t.user.email)+"\r\n                   ")]),t._v(" "),e("td",{staticClass:"d-none d-sm-table-cell"},[t._v("\r\n                    "+t._s(t._f("toCurrency")(t.user.funds))+" \r\n                   ")]),t._v(" "),e("td",{staticClass:"d-none d-sm-table-cell"},[e("p",[t._v(t._s(t.user.notes))])]),t._v(" "),e("td",{staticClass:"d-none d-sm-table-cell"},[t._v("\r\n                    "+t._s(t.user.created_at)+"\r\n                   ")]),t._v(" "),e("td",{staticClass:"d-none d-sm-table-cell"},[e("span",{staticClass:"badge badge-pill",class:{"badge-success":"active"==t.user.status,"badge-danger":"deactive"==t.user.status}},[t._v(t._s(this.$getLang(t.user.status)))])]),t._v(" "),e("td",{staticClass:"text-center"},[e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(s){return t.editItem()}}},[e("i",{staticClass:"fa fa-pencil-alt"})])]),t._v(" "),e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button",title:this.$getLang("delete"),"data-toggle":"tooltip","data-placement":"bottom"},on:{click:function(s){return t.deleteItem()}}},[e("i",{staticClass:"fa fa-trash"})])])])])}),[],!1,null,null,null).exports;var s="users/";new Vue({el:"#app",data:{postdata:{},errors:{},modal_target:"#edit-user-modal",delete_item:0,users:{},search:"",password:"",avatar:"",password_new:"",password_new_confirm:"",confirm_password:null,loading:!0,id:0},components:{"user-item":t},methods:{loadModal:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.id=s,this.initForm(s),s?axios.get(window.location.href+"/"+s).then((function(s){200==s.status&&(t.postdata=s.data,$(t.modal_target).modal("show"))})):$(this.modal_target).modal("show")},closeModal:function(){$(this.modal_target).modal("hide")},storeUser:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.valideForm(e),0==Object.keys(this.errors).length&&(e?axios.put(window.location.href+"/"+e,this.postdata).then((function(s){201==s.status?($(t.modal_target).modal("hide"),window.utilities.notify("success","user updated successfully"),t.getUsers()):200==s.status&&(s.data.email&&t.$set(t.errors,"email",{taken:s.data.email}),s.data.username&&t.$set(t.errors,"username",{taken:s.data.username}))})).catch((function(s){300==s.response.status&&($(t.modal_target).modal("hide"),window.utilities.notify("error","for security reasons you can't update data in demo version"))})):axios.post(s,this.postdata).then((function(s){200==s.status?($(t.modal_target).modal("hide"),window.utilities.notify("success","New user added successfully"),t.getUsers()):400==s.status&&(s.data.email&&t.$set(t.errors,"email",{taken:s.data.email}),s.data.username&&t.$set(t.errors,"username",{taken:s.data.username}))})).catch((function(s){300==s.response.status&&($(t.modal_target).modal("hide"),window.utilities.notify("error","for security reasons you can't update data in demo version"))})))},getUsers:function(t){var s=this;this.loading=!0,void 0===t&&(t=1);var e="?api=true&page="+t;null!=this.search&&this.search.length&&(e+="&search="+this.search),axios.get(e).then((function(t){200==t.status&&(s.users=t.data,s.loading=!1)}))},loadModalDelete:function(t){this.delete_item=t,$("#modal-delete").modal("show")},loadModalView:function(t){$("#view-user-modal").modal("show")},deleteItem:function(){var t=this;axios.delete(window.location.href+"/"+this.delete_item).then((function(s){200==s.status&&($("#modal-delete").modal("hide"),window.utilities.notify("success","item deleted successfully"),t.getUsers())})).catch((function(t){300==t.response.status&&($("#modal-delete").modal("hide"),window.utilities.notify("error","for security reasons you can't update data in demo version"))}))},valideForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.errors={},this.postdata.username||this.$set(this.errors,"username",{required:!0}),this.postdata.email||this.$set(this.errors,"email",{required:!0}),this.postdata.firstname||this.$set(this.errors,"firstname",{required:!0}),this.postdata.username||this.$set(this.errors,"username",{required:!0}),this.postdata.lastname||this.$set(this.errors,"lastname",{required:!0}),this.postdata.password&&this.postdata.password.length>=8&&(this.confirm_password||this.$set(this.errors,"confirm_password",{required:!0}),this.confirm_password!=this.postdata.password&&this.$set(this.errors,"confirm_password",{notmatch:!0})),this.postdata.password&&this.postdata.password.length<8&&this.$set(this.errors,"password",{minimum:!0}),t||this.postdata.password||this.$set(this.errors,"password",{required:!0})},initForm:function(t){this.errors={},t?(this.$set(this.postdata,"password",""),this.$set(this.postdata,"confirm_password","")):(this.$set(this.postdata,"status","active"),this.$set(this.postdata,"notes",""),this.$set(this.postdata,"firstname",""),this.$set(this.postdata,"lastname",""),this.$set(this.postdata,"username",""),this.$set(this.postdata,"phone",""),this.$set(this.postdata,"address",""),this.$set(this.postdata,"password",""),this.$set(this.postdata,"confirm_password",""))},setAvatar:function(t){this.avatar=t.target.files[0].name},validateUserPassword:function(){this.errors={},Object.keys(this.errors).length||this.$refs.user_profil.submit()}},mounted:function(){this.initForm(),this.getUsers()}})})();